AWSTemplateFormatVersion: 2010-09-09
Description: Deploy application stack example in a basic VPC
Parameters:
  ProjectName:
    Description: A descriptive label used in Name tags
    Type: String
    Default: ''
  NotificationEmail:
    Description: Notification email for security events
    Type: String
  ProductionVpcCidrBlock:
    Description: Class B VPC Network CIDR, First two octets
    Type: String
    Default: '10.100'
  StagingVpcCidrBlock:
    Description: Class B VPC Network CIDR, First two octets
    Type: String
    Default: '10.101'
  TestVpcCidrBlock:
    Description: Class B VPC Network CIDR, First two octets
    Type: String
    Default: '10.102'
  DevelopmentVpcCidrBlock:
    Description: Class B VPC Network CIDR, First two octets
    Type: String
    Default: '10.103'
  ManagementVpcCidrBlock:
    Description: Class B VPC Network CIDR, First two octets
    Type: String
    Default: '10.10'
  AvailabilityZone1:
    Description: Availability Zone 1 Name in Region
    Type: AWS::EC2::AvailabilityZone::Name
  AvailabilityZone2:
    Description: Availability Zone 2 Name in Region
    Type: AWS::EC2::AvailabilityZone::Name
  StackTemplates:
    Description: Template service base URL
    Type: String
    Default: https://s3.us-east-2.amazonaws.com/cfn-stacks.com/templates
  InfraTemplates:
    Description: Key name prefix for infrastructure templates
    Type: String
    Deafult: release/com/cfnstacks/cfn-base-vpc/0.0.3
  bCreateProductionVPC:
    Description: Should the Production VPC get created?
    Type: String
    Default: true
  bCreateStagingVPC:
    Description: Should the Staging VPC get created?
    Type: String
    Default: true
  bCreateTestVPC:
    Description: Should the Test VPC get created?
    Type: String
    Default: true
  bCreateDevVPC:
    Description: Should the Dev VPC get created?
    Type: String
    Default: true
  allowedCIDR:
    Description: IPs allowed to access the bastion
    Type: String
  pEC2KeyPairBastion:
    Description: The SSH key pair in your account to use for the bastion host login
    Type: AWS::EC2::KeyPair::KeyName
  pEC2KeyPair:
    Description: The SSH key pair in your account to use for all other EC2 instance
      logins
    Type: AWS::EC2::KeyPair::KeyName
Conditions:
  CreateProductionVPC: !Equals [ true, !Ref bCreateProductionVPC]
  CreateStagingVPC: !Equals [ true, !Ref bCreateStagingVPC]
  CreateTestVPC: !Equals [ true, !Ref bCreateTestVPC]
  CreateDevVPC: !Equals [ true, !Ref bCreateDevVPC]
  LoadConfigRulesTemplate: !Equals [ true, !FindInMap [ RegionServiceSupport, !Ref 'AWS::Region', ConfigRules ] ]
Resources:
  Iam:
    Type: 'AWS::CloudFormation::Stack'
    Properties:
      TemplateURL: !Sub '${StackTemplates}/${InfraTemplates}/iam.yaml'
      TimeoutInMinutes: 20
  Logging:
    Type: 'AWS::CloudFormation::Stack'
    Properties:
      TemplateURL: !Sub '${StackTemplates}/${InfraTemplates}/logging.yaml'
      TimeoutInMinutes: 20
      Parameters:
        pNotifyEmail: !Ref NotificationEmail
        pSupportsGlacier: !FindInMap [ RegionServiceSupport, !Ref 'AWS::Region', Glacier ]
  ProductionVpc:
    Type: 'AWS::CloudFormation::Stack'
    Condition: CreateProductionVPC
    Properties:
      TemplateURL: !Sub '${StackTemplates}/${InfraTemplates}/vpc-environment.yaml'
      TimeoutInMinutes: 20
      Parameters:
        pVPCName: !Sub "${ProjectName} Production VPC"
        pRegionAZ1Name: !Ref AvailabilityZone1
        pRegionAZ2Name: !Ref AvailabilityZone2
        pManagementCIDR: !Sub "${ManagementVpcCidrBlock}.0.0/16"
        pCIDR: !Sub "${ProductionVpcCidrBlock}.0.0/16"
        pAppPrivateSubnetACIDR: !Sub "${ProductionVpcCidrBlock}.0.0/20"
        pAppPrivateSubnetBCIDR: !Sub "${ProductionVpcCidrBlock}.16.0/20"
        pDBPrivateSubnetACIDR: !Sub "${ProductionVpcCidrBlock}.32.0/24"
        pDBPrivateSubnetBCIDR: !Sub "${ProductionVpcCidrBlock}.33.0/24"
        pDMZSubnetACIDR: !Sub "${ProductionVpcCidrBlock}.34.0/24"
        pDMZSubnetBCIDR: !Sub "${ProductionVpcCidrBlock}.35.0/24"
        pTemplates: !Sub "${StackTemplates}/${InfraTemplates}"
  StagingVpc:
    Type: 'AWS::CloudFormation::Stack'
    Condition: CreateStagingVPC
    Properties:
      TemplateURL: !Sub '${StackTemplates}/${InfraTemplates}/vpc-environment.yaml'
      TimeoutInMinutes: 20
      Parameters:
        pVPCName: !Sub "${ProjectName} Staging VPC"
        pRegionAZ1Name: !Ref AvailabilityZone1
        pRegionAZ2Name: !Ref AvailabilityZone2
        pManagementCIDR: !Sub "${ManagementVpcCidrBlock}.0.0/16"
        pCIDR: !Sub "${StagingVpcCidrBlock}.0.0/16"
        pAppPrivateSubnetACIDR: !Sub "${StagingVpcCidrBlock}.0.0/20"
        pAppPrivateSubnetBCIDR: !Sub "${StagingVpcCidrBlock}.16.0/20"
        pDBPrivateSubnetACIDR: !Sub "${StagingVpcCidrBlock}.32.0/24"
        pDBPrivateSubnetBCIDR: !Sub "${StagingVpcCidrBlock}.33.0/24"
        pDMZSubnetACIDR: !Sub "${StagingVpcCidrBlock}.34.0/24"
        pDMZSubnetBCIDR: !Sub "${StagingVpcCidrBlock}.35.0/24"
        pTemplates: !Sub "${StackTemplates}/${InfraTemplates}"
  TestVpc:
    Type: 'AWS::CloudFormation::Stack'
    Condition: CreateTestVPC
    Properties:
      TemplateURL: !Sub '${StackTemplates}/${InfraTemplates}/vpc-environment.yaml'
      TimeoutInMinutes: 20
      Parameters:
        pVPCName: !Sub "${ProjectName} Test VPC"
        pRegionAZ1Name: !Ref AvailabilityZone1
        pRegionAZ2Name: !Ref AvailabilityZone2
        pManagementCIDR: !Sub "${ManagementVpcCidrBlock}.0.0/16"
        pCIDR: !Sub "${TestVpcCidrBlock}.0.0/16"
        pAppPrivateSubnetACIDR: !Sub "${TestVpcCidrBlock}.0.0/20"
        pAppPrivateSubnetBCIDR: !Sub "${TestVpcCidrBlock}.16.0/20"
        pDBPrivateSubnetACIDR: !Sub "${TestVpcCidrBlock}.32.0/24"
        pDBPrivateSubnetBCIDR: !Sub "${TestVpcCidrBlock}.33.0/24"
        pDMZSubnetACIDR: !Sub "${TestVpcCidrBlock}.34.0/24"
        pDMZSubnetBCIDR: !Sub "${TestVpcCidrBlock}.35.0/24"
        pTemplates: !Sub "${StackTemplates}/${InfraTemplates}"
  DevVpc:
    Type: 'AWS::CloudFormation::Stack'
    Condition: CreateDevVPC
    Properties:
      TemplateURL: !Sub '${StackTemplates}/${InfraTemplates}/vpc-environment.yaml'
      TimeoutInMinutes: 20
      Parameters:
        pVPCName: !Sub "${ProjectName} Dev VPC"
        pRegionAZ1Name: !Ref AvailabilityZone1
        pRegionAZ2Name: !Ref AvailabilityZone2
        pManagementCIDR: !Sub "${ManagementVpcCidrBlock}.0.0/16"
        pCIDR: !Sub "${DevelopmentVpcCidrBlock}.0.0/16"
        pAppPrivateSubnetACIDR: !Sub "${DevelopmentVpcCidrBlock}.0.0/20"
        pAppPrivateSubnetBCIDR: !Sub "${DevelopmentVpcCidrBlock}.16.0/20"
        pDBPrivateSubnetACIDR: !Sub "${DevelopmentVpcCidrBlock}.32.0/24"
        pDBPrivateSubnetBCIDR: !Sub "${DevelopmentVpcCidrBlock}.33.0/24"
        pDMZSubnetACIDR: !Sub "${DevelopmentVpcCidrBlock}.34.0/24"
        pDMZSubnetBCIDR: !Sub "${DevelopmentVpcCidrBlock}.35.0/24"
        pTemplates: !Sub "${StackTemplates}/${InfraTemplates}"
  ManagementVpc:
    Type: 'AWS::CloudFormation::Stack'
    Properties:
      TemplateURL: !Sub '${StackTemplates}/${InfraTemplates}/vpc-management.yaml'
      TimeoutInMinutes: 20
      Parameters:
        pProductionCIDR: !If [ CreateProductionVPC, !Sub "${ProductionVpcCidrBlock}.0.0/16", !Ref 'AWS::NoValue' ]
        pProductionVPC: !If [ CreateProductionVPC, !GetAtt ProductionVpc.Outputs.rVPC, !Ref 'AWS::NoValue' ]
        pRouteTableProdPrivateA: !If [ CreateProductionVPC, !GetAtt ProductionVpc.Outputs.rRouteTablePrivateA, !Ref 'AWS::NoValue' ]
        pRouteTableProdPrivateB: !If [ CreateProductionVPC, !GetAtt ProductionVpc.Outputs.rRouteTablePrivateB, !Ref 'AWS::NoValue' ]
        pRouteTableProdDMZ: !If [ CreateProductionVPC, !GetAtt ProductionVpc.Outputs.rRouteTableDMZ, !Ref 'AWS::NoValue' ]
        pStagingCIDR: !If [ CreateStagingVPC, !Sub "${StagingVpcCidrBlock}.0.0/16", !Ref 'AWS::NoValue' ]
        pStagingVPC: !If [ CreateStagingVPC, !GetAtt StagingVpc.Outputs.rVPC, !Ref 'AWS::NoValue' ]
        pRouteTableStagingPrivateA: !If [ CreateStagingVPC, !GetAtt StagingVpc.Outputs.rRouteTablePrivateA, !Ref 'AWS::NoValue' ]
        pRouteTableStagingPrivateB: !If [ CreateStagingVPC, !GetAtt StagingVpc.Outputs.rRouteTablePrivateB, !Ref 'AWS::NoValue' ]
        pRouteTableStagingDMZ: !If [ CreateStagingVPC, !GetAtt StagingVpc.Outputs.rRouteTableDMZ, !Ref 'AWS::NoValue' ]
        pTestCIDR: !If [ CreateTestVPC, !Sub "${TestVpcCidrBlock}.0.0/16", !Ref 'AWS::NoValue' ]
        pTestVPC: !If [ CreateTestVPC, !GetAtt TestVpc.Outputs.rVPC, !Ref 'AWS::NoValue' ]
        pRouteTableTestPrivateA: !If [ CreateTestVPC, !GetAtt TestVpc.Outputs.rRouteTablePrivateA, !Ref 'AWS::NoValue' ]
        pRouteTableTestPrivateB: !If [ CreateTestVPC, !GetAtt TestVpc.Outputs.rRouteTablePrivateB, !Ref 'AWS::NoValue' ]
        pRouteTableTestDMZ: !If [ CreateTestVPC, !GetAtt TestVpc.Outputs.rRouteTableDMZ, !Ref 'AWS::NoValue' ]
        pDevCIDR: !If [ CreateDevVPC, !Sub "${DevelopmentVpcCidrBlock}.0.0/16", !Ref 'AWS::NoValue' ]
        pDevVPC: !If [ CreateDevVPC, !GetAtt DevVpc.Outputs.rVPC, !Ref 'AWS::NoValue' ]
        pRouteTableDevPrivateA: !If [ CreateDevVPC, !GetAtt DevVpc.Outputs.rRouteTablePrivateA, !Ref 'AWS::NoValue' ]
        pRouteTableDevPrivateB: !If [ CreateDevVPC, !GetAtt DevVpc.Outputs.rRouteTablePrivateB, !Ref 'AWS::NoValue' ]
        pRouteTableDevDMZ: !If [ CreateDevVPC, !GetAtt DevVpc.Outputs.rRouteTableDMZ, !Ref 'AWS::NoValue' ]
        pBastionSSHCIDR: !Ref allowedCIDR
        pManagementCIDR: !Sub "${ManagementVpcCidrBlock}.0.0/16"
        pManagementPrivateSubnetACIDR: !Sub "${ManagementVpcCidrBlock}.0.0/20"
        pManagementPrivateSubnetBCIDR: !Sub "${ManagementVpcCidrBlock}.16.0/20"
        pManagementDMZSubnetACIDR: !Sub "${ManagementVpcCidrBlock}.34.0/24"
        pManagementDMZSubnetBCIDR: !Sub "${ManagementVpcCidrBlock}.35.0/24"
        pManagementVPCName: !Sub "${ProjectName} Management VPC"
        pEC2KeyPairBastion: !Ref pEC2KeyPairBastion
        pEC2KeyPair: !Ref pEC2KeyPair
        pBastionAmi: !FindInMap [ AWSAMIRegionMap, !Ref 'AWS::Region', AMZNLINUXHVM ]
        pRegionAZ1Name: !Ref AvailabilityZone1
        pRegionAZ2Name: !Ref AvailabilityZone2
        pBastionInstanceType: t2.small
        pSupportsNatGateway: !FindInMap [ RegionServiceSupport, !Ref 'AWS::Region', NatGateway ]
        pNatAmi: !FindInMap [ AWSAMIRegionMap, !Ref 'AWS::Region', AMZNLINUXHVM ]
        pNatInstanceType: !FindInMap [ AWSAMIRegionMap, !Ref 'AWS::Region', InstanceType ]
Mappings:
  RegionServiceSupport:
    us-east-1:
      ConfigRules: true
      NatGateway: true
      Glacier: true
    us-east-2:
      ConfigRules: true
      NatGateway: true
      Glacier: true
    us-west-1:
      ConfigRules: true
      NatGateway: true
      Glacier: true
    us-west-2:
      ConfigRules: true
      NatGateway: true
      Glacier: true
    ca-central-1:
      ConfigRules: false
      NatGateway: true
      Glacier: true
    eu-central-1:
      NatGateway: true
      ConfigRules: true
      Glacier: true
    eu-west-1:
      ConfigRules: true
      NatGateway: true
      Glacier: true
    eu-west-2:
      ConfigRules: false
      NatGateway: true
      Glacier: true
    ap-northeast-1:
      ConfigRules: true
      NatGateway: true
      Glacier: true
    ap-northeast-2:
      ConfigRules: true
      NatGateway: true
      Glacier: true
    ap-south-1:
      ConfigRules: false
      NatGateway: true
      Glacier: true
    ap-southeast-1:
      ConfigRules: true
      NatGateway: true
      Glacier: false
    ap-southeast-2:
      ConfigRules: true
      NatGateway: true
      Glacier: true
    sa-east-1:
      ConfigRules: false
      NatGateway: true
      Glacier: false
    us-gov-west-1:
      ConfigRules: false
      NatGateway: false
      Glacier: false
  AWSInfoRegionMap:
    ap-northeast-1:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    ap-northeast-2:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    ap-south-1:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    ap-southeast-1:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    ap-southeast-2:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    ca-central-1:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    eu-central-1:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    eu-west-1:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    eu-west-2:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    sa-east-1:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    us-east-1:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    us-east-2:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    us-gov-west-1:
      Partition: aws-us-gov
      QuickStartS3URL: https://s3-us-gov-west-1.amazonaws.com
    us-west-1:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
    us-west-2:
      Partition: aws
      QuickStartS3URL: https://s3.amazonaws.com
  CustomVariables:
    vResourceEnvironmentTagKey:
      Value: Environment
    vResourceEnvironmentTagValue:
      Value: development
  AWSAMIRegionMap:
    AMI:
      AMZNLINUXHVM: amzn-ami-hvm-2017.03.1.20170812-x86_64-gp2
    ap-northeast-1:
      AMZNLINUXHVM: ami-4af5022c
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    ap-northeast-2:
      AMZNLINUXHVM: ami-8663bae8
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    ap-south-1:
      AMZNLINUXHVM: ami-d7abd1b8
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    ap-southeast-1:
      AMZNLINUXHVM: ami-fdb8229e
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    ap-southeast-2:
      AMZNLINUXHVM: ami-30041c53
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    ca-central-1:
      AMZNLINUXHVM: ami-5ac17f3e
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    eu-central-1:
      AMZNLINUXHVM: ami-657bd20a
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    eu-west-1:
      AMZNLINUXHVM: ami-ebd02392
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    eu-west-2:
      AMZNLINUXHVM: ami-489f8e2c
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    sa-east-1:
      AMZNLINUXHVM: ami-d27203be
      InstanceType: m4.large
      InstanceTypeDatabase: db.m3.large
    us-east-1:
      AMZNLINUXHVM: ami-4fffc834
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    us-east-2:
      AMZNLINUXHVM: ami-ea87a78f
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    us-gov-west-1:
      AMZNLINUXHVM: ami-ffa61d9e
      InstanceType: m4.large
      InstanceTypeDatabase: db.m3.large
    us-west-1:
      AMZNLINUXHVM: ami-3a674d5a
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
    us-west-2:
      AMZNLINUXHVM: ami-aa5ebdd2
      InstanceType: m4.large
      InstanceTypeDatabase: db.m4.large
Outputs:
  AmznLinuxHvmAMI:
    Description: Amazon Linux AMI
    Value: !FindInMap [ AWSAMIRegionMap, !Ref 'AWS::Region', AMZNLINUXHVM ]
  CfnStacksId:
    Description: cfn-stacks.com artifact id
    Value: @artifactId@
  CfnStacksVersion:
    Description: cfn-stacks.com artifact version
    Value: v@version@

  ManagementVpcCIDR:
    Value: !GetAtt ManagementVpc.Outputs.rVPCManagementCIDR

  ProductionVpc:
    Condition: CreateProductionVPC
    Value: !GetAtt ProductionVpc.Outputs.rVPC
  ProductionVpcCidrBlock:
    Condition: CreateProductionVPC
    Value: !Sub '${ProductionVpcCidrBlock}.0.0/16'
  ProductionDmzSubnetA:
    Condition: CreateProductionVPC
    Value: !GetAtt ProductionVpc.Outputs.rDMZSubnetA
  ProductionDmzSubnetACIDR:
    Condition: CreateProductionVPC
    Value: !GetAtt ProductionVpc.Outputs.rDMZSubnetACIDR
  ProductionDmzSubnetB:
    Condition: CreateProductionVPC
    Value: !GetAtt ProductionVpc.Outputs.rDMZSubnetB
  ProductionDmzSubnetBCIDR:
    Condition: CreateProductionVPC
    Value: !GetAtt ProductionVpc.Outputs.rDMZSubnetBCIDR
  ProductionPrivateSubnetA:
    Condition: CreateProductionVPC
    Value: !GetAtt ProductionVpc.Outputs.rAppPrivateSubnetA
  ProductionPrivateSubnetACIDR:
    Condition: CreateProductionVPC
    Value: !GetAtt ProductionVpc.Outputs.rAppPrivateSubnetACIDR
  ProductionPrivateSubnetB:
    Condition: CreateProductionVPC
    Value: !GetAtt ProductionVpc.Outputs.rAppPrivateSubnetB
  ProductionPrivateSubnetBCIDR:
    Condition: CreateProductionVPC
    Value: !GetAtt ProductionVpc.Outputs.rAppPrivateSubnetBCIDR
  ProductionDBPrivateSubnetA:
    Condition: CreateProductionVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetA
  ProductionDBPrivateSubnetACIDR:
    Condition: CreateProductionVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetACIDR
  ProductionDBPrivateSubnetB:
    Condition: CreateProductionVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetB
  ProductionDBPrivateSubnetBCIDR:
    Condition: CreateProductionVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetBCIDR

  StagingVpc:
    Condition: CreateStagingVPC
    Value: !GetAtt StagingVpc.Outputs.rVPC
  StagingVpcCidrBlock:
    Condition: CreateStagingVPC
    Value: !Sub '${StagingVpcCidrBlock}.0.0/16'
  StagingDmzSubnetA:
    Condition: CreateStagingVPC
    Value: !GetAtt StagingVpc.Outputs.rDMZSubnetA
  StagingDmzSubnetACIDR:
    Condition: CreateStagingVPC
    Value: !GetAtt StagingVpc.Outputs.rDMZSubnetACIDR
  StagingDmzSubnetB:
    Condition: CreateStagingVPC
    Value: !GetAtt StagingVpc.Outputs.rDMZSubnetB
  StagingDmzSubnetBCIDR:
    Condition: CreateStagingVPC
    Value: !GetAtt StagingVpc.Outputs.rDMZSubnetBCIDR
  StagingPrivateSubnetA:
    Condition: CreateStagingVPC
    Value: !GetAtt StagingVpc.Outputs.rAppPrivateSubnetA
  StagingPrivateSubnetACIDR:
    Condition: CreateStagingVPC
    Value: !GetAtt StagingVpc.Outputs.rAppPrivateSubnetACIDR
  StagingPrivateSubnetB:
    Condition: CreateStagingVPC
    Value: !GetAtt StagingVpc.Outputs.rAppPrivateSubnetB
  StagingPrivateSubnetBCIDR:
    Condition: CreateStagingVPC
    Value: !GetAtt StagingVpc.Outputs.rAppPrivateSubnetBCIDR
  StagingDBPrivateSubnetA:
    Condition: CreateStagingVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetA
  StagingDBPrivateSubnetACIDR:
    Condition: CreateStagingVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetACIDR
  StagingDBPrivateSubnetB:
    Condition: CreateStagingVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetB
  StagingDBPrivateSubnetBCIDR:
    Condition: CreateStagingVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetBCIDR

  TestVpc:
    Condition: CreateTestVPC
    Value: !GetAtt TestVpc.Outputs.rVPC
  TestVpcCidrBlock:
    Condition: CreateTestVPC
    Value: !Sub '${TestVpcCidrBlock}.0.0/16'
  TestDmzSubnetA:
    Condition: CreateTestVPC
    Value: !GetAtt TestVpc.Outputs.rDMZSubnetA
  TestDmzSubnetACIDR:
    Condition: CreateTestVPC
    Value: !GetAtt TestVpc.Outputs.rDMZSubnetACIDR
  TestDmzSubnetB:
    Condition: CreateTestVPC
    Value: !GetAtt TestVpc.Outputs.rDMZSubnetB
  TestDmzSubnetBCIDR:
    Condition: CreateTestVPC
    Value: !GetAtt TestVpc.Outputs.rDMZSubnetBCIDR
  TestPrivateSubnetA:
    Condition: CreateTestVPC
    Value: !GetAtt TestVpc.Outputs.rAppPrivateSubnetA
  TestPrivateSubnetACIDR:
    Condition: CreateTestVPC
    Value: !GetAtt TestVpc.Outputs.rAppPrivateSubnetACIDR
  TestPrivateSubnetB:
    Condition: CreateTestVPC
    Value: !GetAtt TestVpc.Outputs.rAppPrivateSubnetB
  TestPrivateSubnetBCIDR:
    Condition: CreateTestVPC
    Value: !GetAtt TestVpc.Outputs.rAppPrivateSubnetBCIDR
  TestDBPrivateSubnetA:
    Condition: CreateTestVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetA
  TestDBPrivateSubnetACIDR:
    Condition: CreateTestVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetACIDR
  TestDBPrivateSubnetB:
    Condition: CreateTestVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetB
  TestDBPrivateSubnetBCIDR:
    Condition: CreateTestVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetBCIDR

  DevVpc:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rVPC
  DevVpcCidrBlock:
    Condition: CreateDevVPC
    Value: !Sub '${DevelopmentVpcCidrBlock}.0.0/16'
  DevDmzSubnetA:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rDMZSubnetA
  DevDmzSubnetACIDR:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rDMZSubnetACIDR
  DevDmzSubnetB:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rDMZSubnetB
  DevDmzSubnetBCIDR:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rDMZSubnetBCIDR
  DevPrivateSubnetA:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rAppPrivateSubnetA
  DevPrivateSubnetACIDR:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rAppPrivateSubnetACIDR
  DevPrivateSubnetB:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rAppPrivateSubnetB
  DevPrivateSubnetBCIDR:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rAppPrivateSubnetBCIDR
  DevDBPrivateSubnetA:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetA
  DevDBPrivateSubnetACIDR:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetACIDR
  DevDBPrivateSubnetB:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetB
  DevDBPrivateSubnetBCIDR:
    Condition: CreateDevVPC
    Value: !GetAtt DevVpc.Outputs.rDBPrivateSubnetBCIDR